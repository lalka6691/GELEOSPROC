{% extends "base_generic.html" %}

{% load static %}

{% block content %}
<body class="_body_comp">
  <div id="myDataElement" data-django-variable="{{ cart_json }}"></div>

  {% if user.is_authenticated%}

  <div class="top_right_links_home" style="width: 200px;">
    <button class="btn" onclick="cartOpen()">Корзина</button>
    <a href="/">На главную</a>
  </div>

  {% else %}
    <a href="/" class="top_right_links">На главную</a>
  {% endif %}

  <div class="log_reg_back no_anim" style="margin-top: 210px;">
    <form method="POST" action="/cpucomparison/">
      {% csrf_token %}
    <div class="log_reg_elements">
      <div id="comp_title" class="title">
        <h1>Сравнить процессоры</h1>
      </div>
      <form method="POST" action="/cpucomparison/">
      <div class="cpu_choice">
        <div>
          <input value="{{ cpu1Name }}" name="cpu1" class="input_cpu_name log_reg_input" placeholder="Название" id="input_1" onClick="choiceToggle(this.id)" onkeyup="filterFunction(this.id, 'cpu_list_1'); choiceOpen(this.id);">
        </div>
        <div style="top: 60%;" class="cpu_list_items hidden" id="cpu_list_1" >
          {% for cpu in CPUS %}
            <p onClick="insertText(this, 'input_1')">{{ cpu.name }}</p>
          {% endfor %}
        </div>

        <p> VS </p>

        <div>
          <input value="{{ cpu2Name }}" name="cpu2" class="input_cpu_name log_reg_input" placeholder="Название" id="input_2" onClick="choiceToggle(this.id)" onkeyup="filterFunction(this.id, 'cpu_list_2'); choiceOpen(this.id);">
        </div>
        <div style="top: 60%;" class="cpu_list_items hidden" id="cpu_list_2">
          {% for cpu in CPUS %}
            <p onClick="insertText(this, 'input_2')">{{ cpu.name }}</p>
          {% endfor %}
        </div>
      </div>

      <button id="comp_btn" class="btn" type="submit" value="Send">Сравнить</button>
    
    </div>
  </form>
  </div>
  
  {% if valid_info %}
  <table border="1" width="75%" cellpadding="5">
    <tr>
      <td>Название процессора</td>
      <td>{{ cpu1Name }}</td>
      <td>{{ cpu2Name }}</td> 
    </tr>
    <tr>
      <td>Цена</td>
      <td>{{ cpu1cost }}$</td>
      <td>{{ cpu2cost }}$</td> 
    </tr>
    {% if user.is_authenticated%}
    <tr>
      <td></td>
      <td><button id="buy_btn1" class="btn" onClick="cpuAddToCart('{{ cpu1Name }}', '{{ cpu1cost }}')">Купить</button></td>
      <td><button id="buy_btn2" class="btn" onClick="cpuAddToCart('{{ cpu2Name }}', '{{ cpu2cost }}')">Купить</button></td> 
    </tr>
    {% endif %}
  </table>
  {% else %}
  <p>Данные введены неправильно!</p>
  {% endif %}

<script src="{% static 'JS/script.js' %}"></script>
<script src="{% static 'JS/cart.js' %}"></script>
<link rel="stylesheet" href="{% static 'CSS/style2.css'%}"/>
</body>
{% endblock %}
